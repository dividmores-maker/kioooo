<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ÙƒÙ†ÙŠØ³Ø© Ø§Ù„Ø³ÙŠØ¯Ø© Ø§Ù„Ø¹Ø°Ø±Ø§Ø¡ ÙˆØ§Ù„Ø´Ù‡ÙŠØ¯ Ù…Ø§Ø±Ø¬Ø±Ø¬Ø³ Ø¨Ø§Ù„ÙƒØ§Ø¨Ù„Ø§Øª</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
<style>
* { box-sizing: border-box; margin: 0; padding: 0; }
body { 
  font-family: 'Cairo', sans-serif; 
  background: #F6F3EE; 
  color: #2B2B2B;
}

/* Header */
header { 
  background: linear-gradient(135deg, #2B2B2B 0%, #3d3d3d 100%);
  color: #fff; 
  padding: 25px 5%; 
  box-shadow: 0 4px 20px rgba(0,0,0,0.3);
  position: sticky;
  top: 0;
  z-index: 1000;
  text-align: center;
}
header h1 { 
  color: #C8A951; 
  font-weight: 700; 
  font-size: 28px; 
  margin-bottom: 15px;
  text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
}
nav { 
  display: flex; 
  justify-content: center; 
  flex-wrap: wrap; 
  gap: 15px; 
}
nav a { 
  color: #fff; 
  text-decoration: none; 
  font-weight: 600; 
  padding: 8px 16px;
  border-radius: 8px;
  transition: all 0.3s ease;
}
nav a:hover { 
  background: #C8A951; 
  color: #2B2B2B;
  transform: translateY(-2px);
}

/* Sections */
.section { 
  padding: 60px 8%; 
  max-width: 1400px;
  margin: 0 auto;
  text-align: center;
}
.section h2 { 
  color: #2B2B2B; 
  font-size: 32px; 
  margin-bottom: 35px; 
  border-bottom: 4px solid #C8A951; 
  display: inline-block; 
  padding-bottom: 8px;
}

/* Cards */
.cards { 
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 25px;
  margin-top: 30px;
}
.card { 
  background: #fff; 
  border-radius: 15px; 
  overflow: hidden;
  box-shadow: 0 6px 20px rgba(0,0,0,0.12); 
  transition: all 0.3s ease;
  display: flex;
  flex-direction: column;
  text-align: right;
}
.card:hover { 
  transform: translateY(-8px); 
  box-shadow: 0 12px 35px rgba(0,0,0,0.2); 
}
.card-image {
  width: 100%;
  height: 200px;
  object-fit: cover;
  background: linear-gradient(135deg, #C8A951 0%, #a08840 100%);
}
.card-content {
  padding: 20px;
  flex-grow: 1;
  display: flex;
  flex-direction: column;
}
.card h3 { 
  color: #C8A951; 
  margin-bottom: 12px;
  font-size: 20px;
}
.card p { 
  font-size: 15px; 
  color: #555;
  line-height: 1.6;
  margin-bottom: 15px;
  flex-grow: 1;
}
.card-date {
  font-size: 13px;
  color: #888;
  margin-bottom: 15px;
}
.view-more { 
  display: inline-block; 
  padding: 10px 20px; 
  background: #C8A951; 
  color: #2B2B2B; 
  border-radius: 10px; 
  text-decoration: none; 
  font-weight: 700; 
  transition: all 0.3s ease;
  align-self: flex-start;
}
.view-more:hover { 
  background: #7A6C4D; 
  color: #fff; 
  transform: translateX(-5px);
}

/* Loading & Empty */
.loading {
  text-align: center;
  padding: 40px;
  font-size: 18px;
  color: #888;
  grid-column: 1 / -1;
}
.empty-state {
  text-align: center;
  padding: 60px 20px;
  color: #999;
  grid-column: 1 / -1;
}
.empty-icon {
  font-size: 60px;
  margin-bottom: 20px;
  opacity: 0.5;
}

/* Admin Button */
.admin-section {
  text-align: center;
  padding: 40px 0;
}
#admin-btn { 
  background: linear-gradient(135deg, #C8A951 0%, #a08840 100%);
  color: #fff; 
  border: none; 
  padding: 15px 35px; 
  border-radius: 12px; 
  font-weight: 700; 
  font-size: 16px;
  font-family: 'Cairo', sans-serif;
  cursor: pointer; 
  transition: all 0.3s ease;
  box-shadow: 0 4px 15px rgba(200, 169, 81, 0.3);
}
#admin-btn:hover { 
  background: linear-gradient(135deg, #7A6C4D 0%, #5d5339 100%);
  transform: translateY(-3px);
  box-shadow: 0 6px 20px rgba(122, 108, 77, 0.4);
}

/* Footer */
footer { 
  background: linear-gradient(135deg, #2B2B2B 0%, #1a1a1a 100%);
  color: #fff; 
  padding: 30px; 
  margin-top: 60px;
  text-align: center;
  box-shadow: 0 -4px 20px rgba(0,0,0,0.2);
}

/* Firebase Status */
.firebase-status {
  position: fixed;
  top: 10px;
  left: 10px;
  background: rgba(0,0,0,0.8);
  color: #fff;
  padding: 8px 12px;
  border-radius: 8px;
  font-size: 12px;
  z-index: 9999;
  display: none;
}
.firebase-status.show { display: block; }
.firebase-status.connected { background: #28a745; }
.firebase-status.error { background: #dc3545; }

/* Responsive */
@media (max-width: 768px) {
  header h1 { font-size: 22px; }
  .section { padding: 40px 5%; }
  .section h2 { font-size: 26px; }
  .cards { grid-template-columns: 1fr; }
}
</style>
</head>
<body>

<!-- Ù…Ø¤Ø´Ø± Ø­Ø§Ù„Ø© Firebase -->
<div class="firebase-status" id="firebaseStatus">ğŸ”„ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ Firebase...</div>

<header>
  <h1>â›ª ÙƒÙ†ÙŠØ³Ø© Ø§Ù„Ø³ÙŠØ¯Ø© Ø§Ù„Ø¹Ø°Ø±Ø§Ø¡ ÙˆØ§Ù„Ø´Ù‡ÙŠØ¯ Ù…Ø§Ø±Ø¬Ø±Ø¬Ø³ Ø¨Ø§Ù„ÙƒØ§Ø¨Ù„Ø§Øª</h1>
  <nav>
    <a href="#news">ğŸ“° Ø§Ù„Ø£Ø®Ø¨Ø§Ø±</a>
    <a href="#masses">ğŸ•Šï¸ Ø§Ù„Ù‚Ø¯Ø§Ø³Ø§Øª</a>
    <a href="#sermons">ğŸ“– Ø§Ù„Ø¹Ø¸Ø§Øª</a>
    <a href="#services">ğŸ¤ Ø§Ù„Ø®Ø¯Ù…Ø§Øª</a>
    <a href="#gallery">ğŸ“¸ Ù…Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ±</a>
  </nav>
</header>

<!-- Ø§Ù„Ø£Ù‚Ø³Ø§Ù… -->
<section class="section" id="news">
  <h2>ğŸ“° Ø¢Ø®Ø± Ø§Ù„Ø£Ø®Ø¨Ø§Ø±</h2>
  <div class="cards" id="news-cards">
    <div class="loading">â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
  </div>
</section>

<section class="section" id="masses">
  <h2>ğŸ•Šï¸ Ø§Ù„Ù‚Ø¯Ø§Ø³Ø§Øª</h2>
  <div class="cards" id="masses-cards">
    <div class="loading">â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
  </div>
</section>

<section class="section" id="sermons">
  <h2>ğŸ“– Ø§Ù„Ø¹Ø¸Ø§Øª</h2>
  <div class="cards" id="sermons-cards">
    <div class="loading">â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
  </div>
</section>

<section class="section" id="services">
  <h2>ğŸ¤ Ø§Ù„Ø®Ø¯Ù…Ø§Øª</h2>
  <div class="cards" id="services-cards">
    <div class="loading">â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
  </div>
</section>

<section class="section" id="gallery">
  <h2>ğŸ“¸ Ù…Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ±</h2>
  <div class="cards" id="gallery-cards">
    <div class="loading">â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
  </div>
</section>

<section class="admin-section">
  <button id="admin-btn">ğŸ” Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</button>
</section>

<footer>
  <p>Â© 2025 ÙƒÙ†ÙŠØ³Ø© Ø§Ù„Ø³ÙŠØ¯Ø© Ø§Ù„Ø¹Ø°Ø±Ø§Ø¡ ÙˆØ§Ù„Ø´Ù‡ÙŠØ¯ Ù…Ø§Ø±Ø¬Ø±Ø¬Ø³ Ø¨Ø§Ù„ÙƒØ§Ø¨Ù„Ø§Øª â€¢ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</p>
</footer>

<script type="module">
// ==========================================
// ğŸ”¥ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Firebase - Ø¶Ø¹ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ù‡Ù†Ø§
// ==========================================
import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
import { getFirestore, collection, getDocs, query, orderBy, limit } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

// âš ï¸ Ø§Ø³ØªØ¨Ø¯Ù„ Ù‡Ø°Ù‡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ù…Ù† Firebase Console
 const firebaseConfig = {
    apiKey: "AIzaSyCHpkIlf8A13cL6TLggr7-3u8FM-PxzfSY",
    authDomain: "activitiescommittee-5b22c.firebaseapp.com",
    projectId: "activitiescommittee-5b22c",
    storageBucket: "activitiescommittee-5b22c.firebasestorage.app",
    messagingSenderId: "378991885059",
    appId: "1:378991885059:web:d8db039a6fc569fffb8736"
  };

let app, db;
let isFirebaseConnected = false;

// Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ Firebase
try {
  app = initializeApp(firebaseConfig);
  db = getFirestore(app);
  isFirebaseConnected = true;
  showFirebaseStatus('âœ… Ù…ØªØµÙ„ Ø¨Ù€ Firebase', 'connected');
  console.log('âœ… Firebase Ù…ØªØµÙ„ Ø¨Ù†Ø¬Ø§Ø­');
} catch (error) {
  console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ Firebase:', error);
  showFirebaseStatus('âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„', 'error');
  isFirebaseConnected = false;
}

// Ø¯Ø§Ù„Ø© Ø¹Ø±Ø¶ Ø­Ø§Ù„Ø© Firebase
function showFirebaseStatus(message, type) {
  const status = document.getElementById('firebaseStatus');
  status.textContent = message;
  status.className = `firebase-status show ${type}`;
  setTimeout(() => {
    status.classList.remove('show');
  }, 3000);
}

// ==========================================
// ğŸ“¥ Ø¯Ø§Ù„Ø© Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Firebase
// ==========================================
async function getData(collectionName) {
  if (!isFirebaseConnected) {
    console.warn('âš ï¸ Firebase ØºÙŠØ± Ù…ØªØµÙ„ - Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©');
    return getMockData(collectionName);
  }

  try {
    const q = query(
      collection(db, collectionName),
      orderBy('createdAt', 'desc'),
      limit(6)
    );
    const snapshot = await getDocs(q);
    return snapshot.docs.map(doc => ({
      id: doc.id,
      ...doc.data()
    }));
  } catch (error) {
    console.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ ${collectionName}:`, error);
    return getMockData(collectionName);
  }
}

// ==========================================
// ğŸ­ Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© (Ù„Ù„ØªØ¬Ø±Ø¨Ø© Ø¨Ø¯ÙˆÙ† Firebase)
// ==========================================
function getMockData(type) {
  const mockData = {
    news: [
      {
        id: '1',
        title: 'Ø®Ø¨Ø± ØªØ¬Ø±ÙŠØ¨ÙŠ',
        description: 'Ù‡Ø°Ø§ Ø®Ø¨Ø± ØªØ¬Ø±ÙŠØ¨ÙŠ ÙŠØ¸Ù‡Ø± Ø¹Ù†Ø¯ Ø¹Ø¯Ù… Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ Firebase',
        createdAt: new Date().toISOString()
      }
    ],
    masses: [
      {
        id: '1',
        title: 'Ù‚Ø¯Ø§Ø³ ØµØ¨Ø§Ø­ÙŠ',
        description: '10:00 ØµØ¨Ø§Ø­Ø§Ù‹ - ÙƒÙ„ ÙŠÙˆÙ… Ø£Ø­Ø¯',
        createdAt: new Date().toISOString()
      }
    ],
    sermons: [
      {
        id: '1',
        title: 'Ø¹Ø¸Ø© ØªØ¬Ø±ÙŠØ¨ÙŠØ©',
        description: 'Ù…Ù„Ø®Øµ Ø§Ù„Ø¹Ø¸Ø© ÙŠØ¸Ù‡Ø± Ù‡Ù†Ø§',
        createdAt: new Date().toISOString()
      }
    ],
    services: [
      {
        id: '1',
        title: 'Ø®Ø¯Ù…Ø© ØªØ¬Ø±ÙŠØ¨ÙŠØ©',
        description: 'ÙˆØµÙ Ø§Ù„Ø®Ø¯Ù…Ø© ÙŠØ¸Ù‡Ø± Ù‡Ù†Ø§',
        createdAt: new Date().toISOString()
      }
    ],
    gallery: [
      {
        id: '1',
        title: 'ØµÙˆØ±Ø© ØªØ¬Ø±ÙŠØ¨ÙŠØ©',
        description: 'ÙˆØµÙ Ø§Ù„ØµÙˆØ±Ø©',
        mediaUrls: ['https://via.placeholder.com/400x300/C8A951/FFFFFF?text=Church'],
        createdAt: new Date().toISOString()
      }
    ]
  };
  return mockData[type] || [];
}

// ==========================================
// ğŸ¨ Ø¯Ø§Ù„Ø© Ø¹Ø±Ø¶ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª
// ==========================================
function renderCards(containerId, items, type) {
  const container = document.getElementById(containerId);
  
  if (items.length === 0) {
    container.innerHTML = `
      <div class="empty-state">
        <div class="empty-icon">ğŸ“­</div>
        <p>Ù„Ø§ ØªÙˆØ¬Ø¯ ${getTypeName(type)} Ø­Ø§Ù„ÙŠØ§Ù‹</p>
      </div>
    `;
    return;
  }

  container.innerHTML = items.map(item => {
    const hasMedia = item.mediaUrls && item.mediaUrls.length > 0;
    const mediaUrl = hasMedia ? item.mediaUrls[0] : '';
    const isVideo = mediaUrl && (mediaUrl.includes('.mp4') || mediaUrl.includes('.webm') || mediaUrl.includes('video'));
    
    return `
      <div class="card">
        ${hasMedia ? (isVideo ? 
          `<video class="card-image" src="${mediaUrl}" controls></video>` :
          `<img class="card-image" src="${mediaUrl}" alt="${item.title}" loading="lazy">`) : 
          `<div class="card-image"></div>`
        }
        <div class="card-content">
          <h3>${item.title}</h3>
          <p>${item.description || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ'}</p>
          ${item.createdAt ? `<div class="card-date">ğŸ“… ${formatDate(item.createdAt)}</div>` : ''}
        </div>
      </div>
    `;
  }).join('');
}

// ==========================================
// ğŸ› ï¸ Ø¯ÙˆØ§Ù„ Ù…Ø³Ø§Ø¹Ø¯Ø©
// ==========================================
function formatDate(dateStr) {
  if (!dateStr) return '';
  const date = typeof dateStr === 'string' ? new Date(dateStr) : dateStr.toDate();
  return date.toLocaleDateString('ar-EG', {
    year: 'numeric',
    month: 'long',
    day: 'numeric',
    hour: '2-digit',
    minute: '2-digit'
  });
}

function getTypeName(type) {
  const names = {
    news: 'Ø£Ø®Ø¨Ø§Ø±',
    masses: 'Ù‚Ø¯Ø§Ø³Ø§Øª',
    sermons: 'Ø¹Ø¸Ø§Øª',
    services: 'Ø®Ø¯Ù…Ø§Øª',
    gallery: 'ØµÙˆØ±'
  };
  return names[type] || 'Ø¹Ù†Ø§ØµØ±';
}

// ==========================================
// ğŸ”„ ØªØ­Ù…ÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
// ==========================================
async function loadAllSections() {
  try {
    const [news, masses, sermons, services, gallery] = await Promise.all([
      getData('news'),
      getData('masses'),
      getData('sermons'),
      getData('services'),
      getData('gallery')
    ]);

    renderCards('news-cards', news, 'news');
    renderCards('masses-cards', masses, 'masses');
    renderCards('sermons-cards', sermons, 'sermons');
    renderCards('services-cards', services, 'services');
    renderCards('gallery-cards', gallery, 'gallery');
  } catch (error) {
    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', error);
  }
}

// ==========================================
// ğŸ” Ø²Ø± Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
// ==========================================
const adminPassword = "12345";
document.getElementById('admin-btn').addEventListener('click', () => {
  const pass = prompt("ğŸ” Ø§Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù„Ù„ÙˆØµÙˆÙ„ Ù„Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…:");
  if (pass === adminPassword) {
    window.location.href = "dashboard.html";
  } else if (pass !== null) {
    alert("âŒ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø®Ø§Ø·Ø¦Ø©!");
  }
});

// ==========================================
// ğŸš€ Ø¨Ø¯Ø¡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
// ==========================================
window.addEventListener('DOMContentLoaded', loadAllSections);

// Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ ÙƒÙ„ 5 Ø¯Ù‚Ø§Ø¦Ù‚ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø£Ø­Ø¯Ø« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
setInterval(loadAllSections, 5 * 60 * 1000);
</script>

</body>
</html>